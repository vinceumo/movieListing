(function(e){function t(t){for(var r,a,s=t[0],l=t[1],c=t[2],f=0,v=[];f<s.length;f++)a=s[f],i[a]&&v.push(i[a][0]),i[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(v.length)v.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={app:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/movieListing/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"029a":function(e,t,n){},"0b54":function(e,t,n){"use strict";var r=n("22fb"),i=n.n(r);i.a},"22fb":function(e,t,n){},"2e2a":function(e,t,n){"use strict";var r=n("029a"),i=n.n(r);i.a},"507a":function(e,t,n){},"55fb":function(e,t,n){"use strict";var r=n("8b8b"),i=n.n(r);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"movieListingApp"}},[n("AppHeader",{attrs:{title:"Films Showing in Cinemas"}}),n("main",[n("FilterBar",{on:{ratingValChange:e.getRatingValue}}),e.hasApiCallError||0!==e.movies.length?e._e():n("LoadingSpinner"),n("transition",{attrs:{name:"fade"}},[e.hasApiCallError?n("div",[n("ErrorMessage",{attrs:{copy:"There was an error, please try again",gif:"https://media.giphy.com/media/3ohzdYJK1wAdPWVk88/giphy.gif"}})],1):e._e(),e.movies.length?n("MovieListing",{attrs:{movieList:e.movies,selectedRating:parseInt(e.selectedRating)}}):e._e()],1)],1)],1)},o=[],a=(n("7f7f"),n("ac4d"),n("8a81"),n("ac6a"),n("55dd"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"container"},[n("h1",[e._v(e._s(e.title))])])}),s=[],l={props:{title:String}},c=l,u=(n("f5c5"),n("2877")),f=Object(u["a"])(c,a,s,!1,null,"830691fa",null),v=f.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"error-msg"},[n("div",[n("h2",[e._v(e._s(e.copy))]),n("img",{staticClass:"img-fluid",attrs:{src:e.gif,alt:"sad annimated gif"}})])])},d=[],g={props:{copy:String,gif:String}},h=g,m=(n("f2e0"),Object(u["a"])(h,p,d,!1,null,"d57e74d2",null)),b=m.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container filter-bar"},[n("label",{attrs:{for:"ratingFilter"}},[e._v("Filter by ratings above: ")]),n("select",{attrs:{id:"ratingFilter"},on:{change:e.emitRatingValue}},e._l(11,function(t){return n("option",{key:t-1,domProps:{value:t-1}},[e._v("\n      "+e._s(t-1)+"\n    ")])}),0)])},_=[],w={methods:{emitRatingValue:function(e){var t=e.target.value;this.$emit("ratingValChange",t)}}},C=w,j=(n("6ebb"),Object(u["a"])(C,y,_,!1,null,"dfdc8cc8",null)),O=j.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"spinner"})},M=[],E=(n("55fb"),{}),x=Object(u["a"])(E,S,M,!1,null,"55b654ce",null),A=x.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("transition",{attrs:{name:"fade"}},[e.movieHasNoResults?n("div",[n("ErrorMessage",{attrs:{copy:"No results ðŸ˜¢",gif:"https://media.giphy.com/media/d2lcHJTG5Tscg/giphy.gif"}})],1):e._e()]),n("transition-group",{staticClass:"movie-listing list-unstyled",attrs:{tag:"ul",name:"fade"}},e._l(e.movieListToShow(),function(e){return n("MovieCard",{key:e.id,attrs:{title:e.title,posterUrl:e.poster_path,movieGenres:e.genres}})}),1)],1)},R=[],k=(n("c5f6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"movie-card",class:e.posterUrl?"has-poster":""},[e.posterUrl?n("img",{attrs:{src:"https://image.tmdb.org/t/p/w200/"+e.posterUrl,alt:e.title+" poster"}}):e._e(),n("div",{staticClass:"movie-card-content"},[n("h2",[e._v(e._s(e.title))]),e.movieGenres.length?n("ul",{staticClass:"tags"},e._l(e.movieGenres,function(t,r){return n("li",{key:r},[e._v("\n        "+e._s(t)+"\n      ")])}),0):e._e()])])}),G=[],N={props:{title:String,posterUrl:String,movieGenres:Array,popularity:Number}},P=N,$=(n("0b54"),Object(u["a"])(P,k,G,!1,null,"32f8c592",null)),F=$.exports,T={components:{ErrorMessage:b,MovieCard:F},props:{movieList:Array,selectedRating:Number},data:function(){return{movieHasNoResults:!1}},methods:{movieListToShow:function(){if(0===this.selectedRating)return this.movieHasNoResults=!(this.movieList.length>0),this.movieList;var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.movieList[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.vote_average>=this.selectedRating&&e.push(a)}}catch(s){n=!0,r=s}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return this.movieHasNoResults=!(e.length>0),e}}},B=T,H=(n("2e2a"),Object(u["a"])(B,L,R,!1,null,"5a818f9d",null)),V=H.exports,U=n("bc3a"),J=n.n(U),q=n("be30"),z={name:"app",components:{AppHeader:v,ErrorMessage:b,FilterBar:O,LoadingSpinner:A,MovieListing:V},data:function(){return{movies:[],movieGenres:{},country:"GB",selectedRating:0,hasApiCallError:!1,apiCallErrorMsg:""}},created:function(){this.getMovieGenresAndMovies()},mounted:function(){Object(q["a"])()},methods:{sortObjectBy:function(e){return function(t,n){return t[e]==n[e]?0:+(t[e]>n[e])||-1}},getRatingValue:function(e){this.selectedRating=e},getPopularMovies:function(){var e=this;J.a.get("https://api.themoviedb.org/3/movie/now_playing?api_key=386f3833fc837a1939fab52920de1c25&page=1&region=".concat(e.country)).then(function(t){var n=t.data.results;n=n.sort(e.sortObjectBy("popularity"));var r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value,c=[],u=!0,f=!1,v=void 0;try{for(var p,d=l.genre_ids[Symbol.iterator]();!(u=(p=d.next()).done);u=!0){var g=p.value;g=e.movieGenres[g],c.push(g)}}catch(h){f=!0,v=h}finally{try{u||null==d.return||d.return()}finally{if(f)throw v}}l.genres=c}}catch(h){i=!0,o=h}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}e.movies=n.reverse()}).catch(function(t){e.hasApiCallError=!0})},getMovieGenresAndMovies:function(){var e=this;J.a.get("https://api.themoviedb.org/3/genre/movie/list?api_key=386f3833fc837a1939fab52920de1c25&language=en-GB").then(function(t){var n=t.data.genres,r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;e.movieGenres[l.id]=l.name}}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}e.getPopularMovies()}).catch(function(t){e.hasApiCallError=!0})}}},I=z,K=(n("5c0b"),Object(u["a"])(I,i,o,!1,null,null,null)),W=K.exports,Y=n("9483");Object(Y["a"])("".concat("/movieListing/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("507a");r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(W)}}).$mount("#movieListingApp")},"5c0b":function(e,t,n){"use strict";var r=n("8fba"),i=n.n(r);i.a},"6ebb":function(e,t,n){"use strict";var r=n("fdb6"),i=n.n(r);i.a},8725:function(e,t,n){},"8b8b":function(e,t,n){},"8fba":function(e,t,n){},a39f:function(e,t,n){},f2e0:function(e,t,n){"use strict";var r=n("a39f"),i=n.n(r);i.a},f5c5:function(e,t,n){"use strict";var r=n("8725"),i=n.n(r);i.a},fdb6:function(e,t,n){}});
//# sourceMappingURL=app.1fc11c78.js.map